<!DOCTYPE html>
<html lang="fr">
<head>
	<meta charset="UTF-8">
	<title>Sophie Bluel - Interior Designer</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Syne:wght@700;800&family=Work+Sans&display=swap" rel="stylesheet">
	<meta name="description" content="">
	<link rel="stylesheet" href="./assets/loginstyle.css">
</head>
<body>
<header>
	<h1>Sophie Bluel <span>Interior Designer</span></h1>
	<nav>
		<ul>
			<li>Projects</li>
			<li>Contact</li>
      <li><a href="login.html" class ="active">Login</a></li>
			<li><img src="./assets/icons/instagram.png" alt="Instagram"></li>
		</ul>
	</nav>
</header>
<main>
    <div class="login-container">
        <h2>Login</h2>
        <form action="/login" method="post">
            <label for="email">Email</label>
            <input type="email" id="email" name="email">
            
            <label for="password">Password</label>
            <input type="password" id="password" name="password">
            
            <input type="submit" value="Sign In">
        </form>
        <div class="forgot-password">
            <a href="#">Forgot your password?</a>
        </div>
    </div>
</main>

<script>
// Define the API URL
const apiUrl = "http://localhost:5678/api/users/login";

// Capture user input (example)
const email = "sophie.bluel@test.tld"; // Replace with dynamic input value
const password = "S0phie"; // Replace with dynamic input value

// Create the payload
const payload = {
    email: email,
    password: password,
};

// Make the POST request
fetch(apiUrl, {
    method: "POST",
    headers: {
        "Accept": "application/json", // Accept header
        "Content-Type": "application/json", // Content-Type header
    },
    body: JSON.stringify(payload), // Convert payload to JSON
})
    .then((response) => {
        if (!response.ok) {
            // Handle HTTP errors
            throw new Error(`HTTP error! status: ${response.status}`);
        }
        return response.json(); // Parse the JSON response
    })
    .then((data) => {
        console.log("Login successful:", data);
        // Handle success (e.g., store token, redirect)
    })
    .catch((error) => {
        console.error("Error:", error.message);
        // Handle errors (e.g., show error message to user)
    });

</script>

</body>
</html>